/*! bubblejumper-js-1.0.0 2015-08-19 https://github.com/dqsmith/fishy13k*/
function jump(){canJump&&(vy=-16,canJump=!1,removeBubble())}function checkCollison(){for(var a in bubbles){var b=bubbles[a].bubble;if(hasCollided(dude,b)){collided=!0,canJump=!0,collidedBubble=bubbles[a];break}}}function removeBubbles(){for(var a=bubbles.length;a--;)if(bubbles[a].y<30){var b=document.getElementById(bubbles[a].id);document.getElementById("stage").removeChild(b),bubbles.splice(a,1)}for(var c=backgroundBubbles.length;c--;)backgroundBubbles[c].y<-backgroundBubbles[c].h-50&&(backgroundBubbles[c].y=Math.round(Math.random()*stage.clientHeight/2)+stage.clientHeight,backgroundBubbles[c].x=Math.round(Math.random()*stage.clientWidth))}function moveBubbles(){for(var a=bubbles.length;a--;)bubbles[a].y-=bubbles[a].s,bubbles[a].bubble.style.left=bubbles[a].x+"px",bubbles[a].bubble.style.top=bubbles[a].y+"px";for(var b=backgroundBubbles.length;b--;)backgroundBubbles[b].y-=backgroundBubbles[b].s,backgroundBubbles[b].bubble.style.left=backgroundBubbles[b].x+"px",backgroundBubbles[b].bubble.style.top=backgroundBubbles[b].y+"px"}function hasCollided(a,b){var c=a.getBoundingClientRect(),d=b.getBoundingClientRect();return!(c.top>d.bottom||c.right<d.left+25||c.bottom<d.top||c.left>d.right-25)}function checkRemoveBubble(){(scale>.75||collidedBubble.y<30)&&removeBubble()}function removeBubble(){collided=!1,scale=.5,dude.style.transform="scale("+scale+")",collidedBubble.y=-collidedBubble.h-50}function draw(){removeBubbles(),moveBubbles(),collided||(jumping(),checkCollison()),render(),checkRemoveBubble(),requestAnimationFrame(draw)}function move(a){null===keyTimer&&(keyTimer=setInterval(function(){0===a?px-=5:px+=5},33))}function jumping(){vy+=gravity,py+=vy,py>stage.clientHeight-75&&(py=stage.clientHeight-75,vy=0,canJump=!0,collided=!1)}function keyDown(a){var b=a.keyCode?a.keyCode:a.which;switch(b){case 38:jump();break;case 40:break;case 37:move(0);break;case 39:move(1)}}function keyUp(a){var b=a.keyCode?a.keyCode:a.which;(37===b||39===b)&&(clearInterval(keyTimer),keyTimer=null)}function render(){for(var a in bubbles)bubbles[a].bubble.style.top=bubbles[a].y+"px";collided&&(px=collidedBubble.x+10,py=collidedBubble.y+5,scale+=.001,dude.style.transform="scale("+scale+")"),dude.style.left=px+"px",dude.style.top=py+"px"}function Bubble(a,b,c,d,e,f){var g=document.createElement("div"),a="bubble_"+a,h=Math.round(1*Math.random())+2,e=e||Math.round(Math.random()*stage.clientWidth)-b/2,f=f||Math.round(100*Math.random())+stage.clientHeight;return g.setAttribute("id",a),g.className="bubble inner "+d,g.style.left=e+"px",g.style.top=f+"px",g.style.width=b+"px",g.style.height=c+"px",g.style.position="absolute",document.getElementById("stage").appendChild(g),{bubble:g,id:a,s:h,x:e,y:f,w:b,h:c}}var dude=document.getElementById("jumper"),stage=document.getElementById("stage"),spikeyTop=document.getElementById("spikey-top"),spikeyBottom=document.getElementById("spikey-bottom"),px=stage.clientWidth/2-84,py=stage.clientHeight-50,vy=0,gravity=.5,canJump=!0,keyTimer=null,collided=!1,collidedBubble=null,scale=.5,bubbles=[],backgroundBubbles=[],j=0;bubbles.push(new Bubble(j,100,100,"collidable",px-15,py-75)),collidedBubble=bubbles[0],collided=!0,dude.style.left=px+"px",dude.style.top=py+"px",setInterval(function(){bubbles.push(new Bubble(j,100,100,"collidable")),backgroundBubbles.length<15&&backgroundBubbles.push(new Bubble("",30,30,"")),j++},1e3);for(var spikeyLeft=-18,i=0;60>i;i++){var spikey=document.createElement("div");spikey.className="spikey",spikey.style.left=spikeyLeft+"px",spikeyLeft+=45,document.getElementById("spikey-top").appendChild(spikey)}spikeyLeft=-18;for(var i=0;40>i;i++){var spikey=document.createElement("div");spikey.className="spikey bottom",spikey.style.left=spikeyLeft+"px",spikeyLeft+=45,document.getElementById("spikey-bottom").appendChild(spikey)}window.onkeydown=keyDown,window.onkeyup=keyUp,draw();